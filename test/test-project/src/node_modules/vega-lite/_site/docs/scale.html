<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link rel="shortcut icon" href="https://vega.github.io/favicon.ico"/>
    <meta name="description" content="Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.
Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values.">

    <script src="/vega-lite/bower_components/d3/d3.min.js"></script>
    <script src="/vega-lite/bower_components/vega/vega.min.js"></script>
    <script src="/vega-lite/vega-lite.min.js"></script>
    <script src="/vega-lite/bower_components/vega-embed/vega-embed.js"></script>
    <script src="/vega-lite/bower_components/highlightjs/highlight.pack.js"></script>

    <script>
      var BASEURL = "/vega-lite";
    </script>

    <title> Vega-Lite: Scale </title>
    <link rel="stylesheet" href="/vega-lite/site/static/syntax.css">
    <link rel="stylesheet" href="/vega-lite/bower_components/highlightjs/styles/github.css">
    <link rel="stylesheet" href="/vega-lite/bower_components/octicons/build/octicons.css">
    <link rel="stylesheet" href="/vega-lite/site/static/main.css">
  </head>
  <body>
    <div class="fill">
  <header>
    <nav class="page-centered">
      <a class="vl-title" href="/vega-lite/">Vega-Lite</a>
      <div class="vl-links">
        <div class="primary-links">
          <a href="/vega-lite/tutorials/getting_started.html" >Tutorials</a>
          <a href="/vega-lite/usage/embed.html" >Usage</a>
          <a href="/vega-lite/docs/" class="active">Documentation</a>
          <a href="/vega-lite/examples/" >Examples</a>
        </div>
        <div class="secondary-links">
          <a href="https://www.github.com/vega/vega-lite" target="_blank">GitHub</a>
          <a href="https://vega.github.io/vega-editor/?mode=vega-lite" target="_blank">Try Online</a>
        </div>
      </div>
    </nav>
  </header>

  <section>
    



<div class="page-centered page-main">
  
  <aside class="page-sidebar">
    <ul class="sidebar-nav">
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/" title="">Overview
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/spec.html" title="">Spec
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/data.html" title="">Data
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/transform.html" title="">Transform
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/mark.html" title="">Mark
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/encoding.html" title="">Encoding
      </a></li>
      
      <ul class="sub-sub-nav">
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/vega-lite/docs/aggregate.html" title="">Aggregate
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/vega-lite/docs/bin.html" title="">Bin
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/vega-lite/docs/sort.html" title="">Sort
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/vega-lite/docs/timeunit.html" title="">Time Unit
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a class="active"
            href="/vega-lite/docs/scale.html" title="">Scale
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/vega-lite/docs/axis.html" title="">Axis
        </a></li>
        
        <li class="sidebar-nav-item sub-item"><a 
            href="/vega-lite/docs/legend.html" title="">Legend
        </a></li>
        
      </ul>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/config.html" title="">Config
      </a></li>
      
      
      
      
      <br>
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/size.html" title="">Customizing Size
      </a></li>
      
      
      
      
      <li class="sidebar-nav-item"><a 
          href="/vega-lite/docs/facet.html" title="">Faceting
      </a></li>
      
      
      
    </nav>
  </aside>
  

  <section class="page-content">
    <h1>Scale</h1>

    <p>Scales are functions that transform a domain of data values (numbers, dates, strings, etc) to a range of visual values (pixels, colors, sizes).</p>

<p>Vega-Lite automatically creates scales for fields that are <a href="#props-channels">mapped to mark properties</a>. Supported <a href="#type">scale types</a> are quantitative, time, and ordinal. Default scale properties are determined based on a set of rules for each scale type, but <a href="encoding.html#scale-and-guide"><code class="highlighter-rouge">scale</code></a> property of the channel definition can be provided to customize the scale’s properties.</p>

<div class="language-json suppress-error highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">,</span><span class="w">
  </span><span class="nt">"mark"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">,</span><span class="w">
  </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span><span class="w">
      </span><span class="nt">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">                </span><span class="err">//</span><span class="w"> </span><span class="err">scale</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="err">}</span><span class="p">,</span><span class="w">
    </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="err">}</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>
</div>

<p>The rest of this page describes properties of a scale and their default behavior.</p>

<ul id="markdown-toc">
  <li><a href="#type" id="markdown-toc-type">Scale Type</a>    <ul>
      <li><a href="#example-log-scale" id="markdown-toc-example-log-scale">Example: Log Scale</a></li>
    </ul>
  </li>
  <li><a href="#domain" id="markdown-toc-domain">Scale Domain</a></li>
  <li><a href="#range" id="markdown-toc-range">Scale Range</a>    <ul>
      <li><a href="#color-palette" id="markdown-toc-color-palette">Built-in Color Palettes</a></li>
      <li><a href="#example-default-color-ranges-based-on-data-types" id="markdown-toc-example-default-color-ranges-based-on-data-types">Example: Default Color Ranges based on Data Types</a></li>
      <li><a href="#example-custom-color-range" id="markdown-toc-example-custom-color-range">Example: Custom Color Range</a></li>
      <li><a href="#piecewise-scale-example-diverging-color-scale" id="markdown-toc-piecewise-scale-example-diverging-color-scale">Piecewise Scale Example: Diverging Color Scale</a></li>
    </ul>
  </li>
  <li><a href="#other-scale-properties" id="markdown-toc-other-scale-properties">Other Scale Properties</a>    <ul>
      <li><a href="#general-scale-properties" id="markdown-toc-general-scale-properties">General Scale Properties</a></li>
      <li><a href="#quant-props" id="markdown-toc-quant-props">Quantitative Scale Properties</a></li>
      <li><a href="#time-scale-properties" id="markdown-toc-time-scale-properties">Time Scale Properties</a></li>
      <li><a href="#ordinal" id="markdown-toc-ordinal">Ordinal Scale Properties</a>        <ul>
          <li><a href="#ex-bandwidth" id="markdown-toc-ex-bandwidth">Example: Custom Band Width</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="type">Scale Type</h2>

<p>Vega-Lite supports the following scale types:</p>

<dl>
  <dt>Quantitative Scale</dt>
  <dd>A quantitative scales takes continuous, quantitative data as its input domain. There are multiple types of quantitative scales. <code class="highlighter-rouge">linear</code>, <code class="highlighter-rouge">power</code>, and <code class="highlighter-rouge">log</code> scales output continuous ranges. Meanwhile <code class="highlighter-rouge">quantize</code> and <code class="highlighter-rouge">quantile</code> scales output discrete ranges.</dd>
</dl>

<ul>
  <li><code class="highlighter-rouge">linear</code> scale expresses each range value <em>y</em> as a linear function of the domain value <em>x</em>: <em>y = mx + b</em>. This is the default scale for a quantitative field (field with <code class="highlighter-rouge">type</code> = <code class="highlighter-rouge">"quantitative"</code>).</li>
  <li><code class="highlighter-rouge">pow</code> scale expresses each range value <em>y</em> as a power (exponential) function of the domain value <em>x</em>: <em>y = mx^k + b</em>, where <em>k</em> is the exponent value. (<em>k</em> can be customized using <a href="#quant-props"><code class="highlighter-rouge">exponent</code></a> property.)</li>
  <li><code class="highlighter-rouge">log</code> scale expresses each range value <em>y</em> as a logarithmic function of the domain value <em>x</em>: <em>y = mlog(x) + b</em>. As <em>log(0) = -∞</em>, a log scale domain must be strictly-positive or strictly-negative; the domain must not include or cross zero. Vega-Lite automatically filters zero values from the field mapped to a log scale.</li>
  <li><code class="highlighter-rouge">quantize</code> scale maps continuous value to a discrete range by dividing the domain into uniform segments based on the number of values in (i.e., the cardinality of) the output range. Each range value <em>y</em> can be expressed as a quantized linear function of the domain value <em>x</em>: <em>y = m round(x) + b</em>.</li>
  <li><code class="highlighter-rouge">quantile</code> scale maps a sampled input domain to a discrete range by sorting the domain and compute the quantiles. The cardinality of the output range determines the number of quantiles that will be computed.</li>
</ul>

<!-- TODO: need to test if we support threshold scale correctly before writing about it-->

<dl>
  <dt>Time Scale</dt>
  <dd>A <code class="highlighter-rouge">time</code> scale is similar to a linear quantitative scale but takes date as input. In general, a temporal field has <code class="highlighter-rouge">time</code> scale by default. The exceptions are temporal fields with <code class="highlighter-rouge">hours</code>, <code class="highlighter-rouge">day</code>, <code class="highlighter-rouge">date</code>, <code class="highlighter-rouge">month</code> as time unit; they have <code class="highlighter-rouge">ordinal</code> scales by default.
<!-- <br/>`utc` is a time scale that uses [Coordinated Universal Time](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) rather than local time. --></dd>
  <dt>Ordinal Scale</dt>
  <dd>An ordinal scale (<code class="highlighter-rouge">ordinal</code>) takes discrete domain as their input domain.   Ordinal (ordered) and nominal (unordered/categorical) data always use <code class="highlighter-rouge">ordinal</code> scale.</dd>
</dl>

<ul>
  <li>An ordinal <code class="highlighter-rouge">color</code> scale with <code class="highlighter-rouge">nominal</code> data outputs categorical color palette while an ordinal <code class="highlighter-rouge">color</code> scale with <code class="highlighter-rouge">ordinal</code> data outputs sequential color ramp. (<a href="#ex-color-range">See example</a>.)</li>
  <li>An ordinal <code class="highlighter-rouge">shape</code> scale always produces a categorical range since shape cannot convey order.</li>
  <li>Ordinal scales for other channels (<code class="highlighter-rouge">x</code>, <code class="highlighter-rouge">y</code>, <code class="highlighter-rouge">size</code>) always output sequential range. The default order for nominal data is determined by Javascript’s natural order. For example, <code class="highlighter-rouge">"a"</code> &lt; <code class="highlighter-rouge">"b"</code>.</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">type</td>
      <td style="text-align: center">String</td>
      <td style="text-align: left">The type of scale. <br /> •  For a <em>quantitative</em> field, supported quantitative scale types  are <code class="highlighter-rouge">"linear"</code> (default), <code class="highlighter-rouge">"log"</code>, <code class="highlighter-rouge">"pow"</code>, <code class="highlighter-rouge">"sqrt"</code>, <code class="highlighter-rouge">"quantile"</code>, <code class="highlighter-rouge">"quantize"</code>, and <code class="highlighter-rouge">"threshold"</code>. <br /> • For a <em>temporal</em> field without <code class="highlighter-rouge">timeUnit</code>, the scale type should be <code class="highlighter-rouge">time</code> (default) or <code class="highlighter-rouge">ordinal</code>. <br />  • For <em>ordinal</em> and <em>nominal</em> fields, the type is always <code class="highlighter-rouge">ordinal</code>. <br />Unsupported values will be ignored.</td>
    </tr>
  </tbody>
</table>

<!-- TODO: add utc to the above table for temporal field -->

<p><strong>Note:</strong> For more information about scale types, please see <a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales">d3 scale documentation</a>.</p>

<h4 id="example-log-scale">Example: Log Scale</h4>

<p>The following example has a logarithmic y-scale.</p>

<div class="vl-example" data-name="scatter_log"></div>

<!-- TODO: refine log example -->

<!--
#### Example: UTC Scale
TODO: example utc scale with utc time unit (once implemented)
-->

<h2 id="domain">Scale Domain</h2>

<p>By default, a scale draws domain values directly from the channel field.
Custom domain values can be specified via the scale’s <code class="highlighter-rouge">domain</code> property.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">domain</td>
      <td style="text-align: center">Array</td>
      <td style="text-align: left">Custom domain values. <br /> • For <em>quantitative</em> data, this can take the form of a two-element array with minimum and maximum values. <br /> • For <em>temporal</em> data, this can, this can be a two-element array with minimum and maximum values in the form of either timestamp numbers or the <a href="transform.html#datetime">DateTime</a> definition object.  <br /> • For <em>ordinal</em> or <em>nominal</em> data, this is an array representing all values and their orders.</td>
    </tr>
  </tbody>
</table>

<!-- TODO:
- Decide if we should write about custom domain for ordinal scale.
- Write about default domain for `month`, `day`, `hour`, `minute`.
- Piecewise scale.
- Quantize scale?
-->

<p><strong>Note:</strong> To sort the order mapping between the domain values and range, please use the channel definition’s <a href="sort.html"><code class="highlighter-rouge">sort</code></a> property.</p>

<!--
#### Example: Custom Domain
TODO: Custom Domain for quantitative
-->

<!-- TODO: Explain default domain for month and (week)day -->

<h2 id="range">Scale Range</h2>

<p>The range of the scale represents the set of output visual values. Vega-Lite automatically determines appropriate range based on the scale’s channel and type, but <code class="highlighter-rouge">range</code> property can be provided to customize range values.</p>

<dl>
  <dt><code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> Scales</dt>
  <dd>For continuous <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> scales (quantitative and time), the range are always <code class="highlighter-rouge">[0, cellWidth]</code> and  <code class="highlighter-rouge">[0, cellHeight]</code> (See <a href="config.html#cell-config">config.cell</a> for customizing cell width and height). For ordinal <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> scales, the maximum range is a product of the field’s cardinality and <a href="#ordinal"><code class="highlighter-rouge">bandSize</code></a>.
<span class="note-line">
<strong>Not Customizable</strong>: specified <code class="highlighter-rouge">range</code> will be ignored.
</span></dd>
  <dt>Nominal <code class="highlighter-rouge">color</code> Scales</dt>
  <dd>A <code class="highlighter-rouge">color</code> scale of a nominal field has a categorical color palette as its range. Customized categorical color <code class="highlighter-rouge">range</code> can be either a <a href="#color-palette">string literal for a palette name</a> or an array of desired output values.
<span class="note-line">
<strong>Default value:</strong> derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">nominalColorRange</code> (<code class="highlighter-rouge">"category10"</code> by default).
</span></dd>
  <dt>Sequential <code class="highlighter-rouge">color</code> Scales</dt>
  <dd>A <code class="highlighter-rouge">color</code> scale for ordinal, temporal, and quantitative fields have a sequential color ramp as its range. Currently, Vega-Lite only supports color ramp that interpolate between two color values. Customized sequential color <code class="highlighter-rouge">range</code> takes a two-element array of color values for interpolation.
<span class="note-line">
<strong>Default value:</strong> derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">sequentialColorRange</code> (green ramp between <code class="highlighter-rouge">["#AFC6A3", "#09622A"]</code> by default).
</span></dd>
  <dt><code class="highlighter-rouge">shape</code> Scales</dt>
  <dd>A <code class="highlighter-rouge">shape</code> scale has a list of shape type names as its range. A customized shape  <code class="highlighter-rouge">range</code> is an array of supported shapes.
<span class="note-line">
<strong>Default value:</strong> derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">shapeRange</code> This is, by default, the <code class="highlighter-rouge">"shape"</code> palette, which is equivalent to<code class="highlighter-rouge">["circle", "cross", "diamond", "square", "triangle-down", "triangle-up"]</code>.
</span></dd>
  <dt><code class="highlighter-rouge">size</code> Scales</dt>
  <dd>A <code class="highlighter-rouge">size</code> scale has a sequential range. Customized size <code class="highlighter-rouge">range</code> can be either a two-element array of size values for the interpolation or (for ordinal size scale only) an array of desired output size for each domain value.
<span class="note-line">
<strong>Default value:</strong>
<br /> • for <code class="highlighter-rouge">bar</code>: derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">barSizeRange</code>. If both scale’s <code class="highlighter-rouge">range</code> and the scale config’s <code class="highlighter-rouge">barSizeRange</code> are unspecified (default), the default size range is a range from <a href="config.mark.html">mark config</a>’s <code class="highlighter-rouge">thinBarWidth</code> to the scale’s <code class="highlighter-rouge">bandSize</code>.
<br /> • for  <code class="highlighter-rouge">point</code>, <code class="highlighter-rouge">square</code>, and <code class="highlighter-rouge">circle</code>: derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">pointSizeRange</code>. If both scale’s <code class="highlighter-rouge">range</code> and the scale config’s <code class="highlighter-rouge">pointSizeRange</code> are unspecified (default), the default size range is a range from 9 to the square of the scale’s <code class="highlighter-rouge">bandSize</code> (<em>bandSize^2</em>).
<br /> • for  <code class="highlighter-rouge">text</code>: derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">fontSizeRange</code> (<code class="highlighter-rouge">[8, 40]</code> by default).
<br /> • for  <code class="highlighter-rouge">tick</code>: derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">tickSizeRange</code> (<code class="highlighter-rouge">[1, 20]</code> by default).
</span></dd>
</dl>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">range</td>
      <td style="text-align: center">Array | String</td>
      <td style="text-align: left">Customized scale range.</td>
    </tr>
  </tbody>
</table>

<h3 id="color-palette">Built-in Color Palettes</h3>

<p>The following built-in palettes can be used as a customized categorical color  <code class="highlighter-rouge">range</code> value.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">"category10"</code></td>
      <td style="text-align: left">Set the scale range to a 10-color categorical palette: <br /><br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/1f77b4.png" alt="1f77b4" /> #1f77b4 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/ff7f0e.png" alt="ff7f0e" /> #ff7f0e <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/2ca02c.png" alt="2ca02c" /> #2ca02c <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/d62728.png" alt="d62728" /> #d62728 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/9467bd.png" alt="9467bd" /> #9467bd<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/8c564b.png" alt="8c564b" /> #8c564b <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/e377c2.png" alt="e377c2" /> #e377c2 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/7f7f7f.png" alt="7f7f7f" /> #7f7f7f <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/bcbd22.png" alt="bcbd22" /> #bcbd22 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/17becf.png" alt="17becf" /> #17becf</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">"category20"</code></td>
      <td style="text-align: left">Set the scale range to a 20-color categorical palette: <br /><br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/1f77b4.png" alt="1f77b4" /> #1f77b4 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/aec7e8.png" alt="aec7e8" /> #aec7e8 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/ff7f0e.png" alt="ff7f0e" /> #ff7f0e <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/ffbb78.png" alt="ffbb78" /> #ffbb78 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/2ca02c.png" alt="2ca02c" /> #2ca02c<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/98df8a.png" alt="98df8a" /> #98df8a <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/d62728.png" alt="d62728" /> #d62728 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/ff9896.png" alt="ff9896" /> #ff9896 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/9467bd.png" alt="9467bd" /> #9467bd <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/c5b0d5.png" alt="c5b0d5" /> #c5b0d5<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/8c564b.png" alt="8c564b" /> #8c564b <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/c49c94.png" alt="c49c94" /> #c49c94 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/e377c2.png" alt="e377c2" /> #e377c2 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/f7b6d2.png" alt="f7b6d2" /> #f7b6d2 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/7f7f7f.png" alt="7f7f7f" /> #7f7f7f<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/c7c7c7.png" alt="c7c7c7" /> #c7c7c7 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/bcbd22.png" alt="bcbd22" /> #bcbd22 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/dbdb8d.png" alt="dbdb8d" /> #dbdb8d <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/17becf.png" alt="17becf" /> #17becf <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/9edae5.png" alt="9edae5" /> #9edae5</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">"category20b"</code></td>
      <td style="text-align: left">Set the scale range to a 20-color categorical palette: <br /><br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/393b79.png" alt="393b79" /> #393b79 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/5254a3.png" alt="5254a3" /> #5254a3 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/6b6ecf.png" alt="6b6ecf" /> #6b6ecf <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/9c9ede.png" alt="9c9ede" /> #9c9ede <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/637939.png" alt="637939" /> #637939<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/8ca252.png" alt="8ca252" /> #8ca252 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/b5cf6b.png" alt="b5cf6b" /> #b5cf6b <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/cedb9c.png" alt="cedb9c" /> #cedb9c <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/8c6d31.png" alt="8c6d31" /> #8c6d31 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/bd9e39.png" alt="bd9e39" /> #bd9e39<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/e7ba52.png" alt="e7ba52" /> #e7ba52 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/e7cb94.png" alt="e7cb94" /> #e7cb94 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/843c39.png" alt="843c39" /> #843c39 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/ad494a.png" alt="ad494a" /> #ad494a <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/d6616b.png" alt="d6616b" /> #d6616b<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/e7969c.png" alt="e7969c" /> #e7969c <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/7b4173.png" alt="7b4173" /> #7b4173 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/a55194.png" alt="a55194" /> #a55194 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/ce6dbd.png" alt="ce6dbd" /> #ce6dbd <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/de9ed6.png" alt="de9ed6" /> #de9ed6</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">"category20c"</code></td>
      <td style="text-align: left">Set the scale range to a 20-color categorical palette: <br /><br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/3182bd.png" alt="3182bd" /> #3182bd <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/6baed6.png" alt="6baed6" /> #6baed6 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/9ecae1.png" alt="9ecae1" /> #9ecae1 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/c6dbef.png" alt="c6dbef" /> #c6dbef <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/e6550d.png" alt="e6550d" /> #e6550d<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/fd8d3c.png" alt="fd8d3c" /> #fd8d3c <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/fdae6b.png" alt="fdae6b" /> #fdae6b <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/fdd0a2.png" alt="fdd0a2" /> #fdd0a2 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/31a354.png" alt="31a354" /> #31a354 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/74c476.png" alt="74c476" /> #74c476<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/a1d99b.png" alt="a1d99b" /> #a1d99b <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/c7e9c0.png" alt="c7e9c0" /> #c7e9c0 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/756bb1.png" alt="756bb1" /> #756bb1 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/9e9ac8.png" alt="9e9ac8" /> #9e9ac8 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/bcbddc.png" alt="bcbddc" /> #bcbddc<br /> <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/dadaeb.png" alt="dadaeb" /> #dadaeb <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/636363.png" alt="636363" /> #636363 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/969696.png" alt="969696" /> #969696 <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/bdbdbd.png" alt="bdbdbd" /> #bdbdbd <img src="https://raw.githubusercontent.com/wiki/mbostock/d3/d9d9d9.png" alt="d9d9d9" /> #d9d9d9</td>
    </tr>
  </tbody>
</table>

<h3 id="example-default-color-ranges-based-on-data-types">Example: Default Color Ranges based on Data Types</h3>

<p>A color scale of a nominal field outputs a categorical color palette.</p>

<div class="vl-example" data-name="scatter_color"></div>

<p>Meanwhile, a color scale an ordinal field and a quantitative field outputs a sequential color ramp.</p>

<div class="vl-example" data-name="scatter_color_ordinal"></div>
<div class="vl-example" data-name="scatter_color_quantitative"></div>

<h3 id="example-custom-color-range">Example: Custom Color Range</h3>

<p>We can customize the color range of the scatterplot above by providing <code class="highlighter-rouge">scale</code>’s <code class="highlighter-rouge">range</code> property. For a nominal color field, <code class="highlighter-rouge">range</code> can be an array describing the desired palette.</p>

<div class="vl-example" data-name="scatter_color_custom"></div>

<p>For ordinal, quantitative, and time fields, <code class="highlighter-rouge">range</code> can be a two-element array describing the two colors for interpolation.</p>

<div class="vl-example" data-name="scatter_color_ordinal_custom"></div>

<h3 id="piecewise-scale-example-diverging-color-scale">Piecewise Scale Example: Diverging Color Scale</h3>

<p>We can also create diverging color graph by specify <code class="highlighter-rouge">range</code> with multiple elements. Number of elements of <code class="highlighter-rouge">range</code> should match with the number of elements in <code class="highlighter-rouge">domain</code>. Though continuous scale normally contains 2 elements in both <code class="highlighter-rouge">domain</code> and <code class="highlighter-rouge">range</code>, having 3 or more elements will create a piecewise scale. For more detail about a piecewise scale, please refer to <a href="https://github.com/d3/d3-scale#continuous_domain">D3 documentation</a>.</p>

<div class="vl-example" data-name="diverging_color_points"></div>

<h2 id="other-scale-properties">Other Scale Properties</h2>

<h3 id="general-scale-properties">General Scale Properties</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">round</td>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: left">If <code class="highlighter-rouge">true</code>, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid (only available for <code class="highlighter-rouge">x</code>, <code class="highlighter-rouge">y</code>, <code class="highlighter-rouge">size</code>, <code class="highlighter-rouge">row</code>, and <code class="highlighter-rouge">column</code> scales). <span class="note-line"><strong>Default value:</strong> derived from <a href="config.html#scale-config">scale config</a> (<code class="highlighter-rouge">true</code> by default).</span></td>
    </tr>
  </tbody>
</table>

<h3 id="quant-props">Quantitative Scale Properties</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">clamp</td>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: left">If <code class="highlighter-rouge">true</code>, values that exceed the data domain are clamped to either the minimum or maximum range value. <span class="note-line"><strong>Default value:</strong> derived from <a href="config.html#scale-config">scale config</a> (<code class="highlighter-rouge">true</code> by default)<br /><strong>Supported types:</strong> only <code class="highlighter-rouge">linear</code>, <code class="highlighter-rouge">pow</code>, <code class="highlighter-rouge">sqrt</code>, and <code class="highlighter-rouge">log</code></span></td>
    </tr>
    <tr>
      <td style="text-align: left">exponent</td>
      <td style="text-align: center">Number</td>
      <td style="text-align: left">Sets the exponent of the scale transformation. (For <code class="highlighter-rouge">pow</code> scale types only, otherwise ignored.)</td>
    </tr>
    <tr>
      <td style="text-align: left">nice</td>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: left">If <code class="highlighter-rouge">true</code>, modifies the scale domain to use a more human-friendly number range (e.g., 7 instead of 6.96). <span class="note-line"><strong>Default value:</strong> <code class="highlighter-rouge">true</code> only for quantitative x and y scales and <code class="highlighter-rouge">false</code> otherwise.</span></td>
    </tr>
    <tr>
      <td style="text-align: left">zero</td>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: left">If <code class="highlighter-rouge">true</code>, ensures that a zero baseline value is included in the scale domain. <span class="note-line"><strong>Default value:</strong> <code class="highlighter-rouge">true</code> for <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> channel if the quantitative field is not binned and no custom <code class="highlighter-rouge">domain</code> is provided; <code class="highlighter-rouge">false</code> otherwise.</span><span class="note-line"><strong>Note:</strong>  This property is always <code class="highlighter-rouge">false</code> for log scale.</span></td>
    </tr>
    <tr>
      <td style="text-align: left">useRawDomain</td>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: left">If <code class="highlighter-rouge">true</code>, set scale domain to the raw data domain. If <code class="highlighter-rouge">false</code>, use the aggregated data domain for scale. <span class="note-line"><strong>Default value:</strong> <code class="highlighter-rouge">false</code><br /><strong>Only valid for certain aggregations:</strong> This property only works with aggregate functions that produce values within the raw data domain (<code class="highlighter-rouge">"mean"</code>, <code class="highlighter-rouge">"average"</code>, <code class="highlighter-rouge">"stdev"</code>, <code class="highlighter-rouge">"stdevp"</code>, <code class="highlighter-rouge">"median"</code>, <code class="highlighter-rouge">"q1"</code>, <code class="highlighter-rouge">"q3"</code>, <code class="highlighter-rouge">"min"</code>, <code class="highlighter-rouge">"max"</code>). For other aggregations that produce values outside of the raw data domain (e.g. <code class="highlighter-rouge">"count"</code>, <code class="highlighter-rouge">"sum"</code>), this property is ignored. <br /><strong>Note:</strong> This property is ignored when the scale’s <code class="highlighter-rouge">domain</code> is specified.</span></td>
    </tr>
  </tbody>
</table>

<h3 id="time-scale-properties">Time Scale Properties</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">clamp</td>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: left">If <code class="highlighter-rouge">true</code>, values that exceed the data domain are clamped to either the minimum or maximum range value. (Not applicable for <code class="highlighter-rouge">quantile</code>, <code class="highlighter-rouge">quantize</code>, and <code class="highlighter-rouge">threshold</code> scales as they output discrete ranges.)</td>
    </tr>
    <tr>
      <td style="text-align: left">nice</td>
      <td style="text-align: center">String</td>
      <td style="text-align: left">If specified, modifies the scale domain to use a more human-friendly value range. For <code class="highlighter-rouge">time</code> and <code class="highlighter-rouge">utc</code> scale types only, the nice value should be a string indicating the desired time interval; legal values are <code class="highlighter-rouge">"second"</code>, <code class="highlighter-rouge">"minute"</code>, <code class="highlighter-rouge">"hour"</code>, <code class="highlighter-rouge">"day"</code>, <code class="highlighter-rouge">"week"</code>, <code class="highlighter-rouge">"month"</code>, or <code class="highlighter-rouge">"year"</code>.</td>
    </tr>
  </tbody>
</table>

<h3 id="ordinal">Ordinal Scale Properties</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Property</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">bandSize</td>
      <td style="text-align: center">Integer | String</td>
      <td style="text-align: left">Width for each <code class="highlighter-rouge">x</code> or <code class="highlighter-rouge">y</code> ordinal band.  This can be an integer value or a string <code class="highlighter-rouge">"fit"</code>.  For <code class="highlighter-rouge">"fit"</code>, the band size will be automatically adjusted to fit the scale for the specified width (for x-axis) or height (for y-axis). <span class="note-line"><strong>Default value:</strong> for <code class="highlighter-rouge">x</code> ordinal scale of a <code class="highlighter-rouge">text</code> mark, derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">textBandWidth</code>; otherwise, derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">bandSize</code>.</span> <span class="note-line"><strong>Warning</strong>: <br /> 1) Numeric <code class="highlighter-rouge">bandSize</code> will be applied only if the top-level <code class="highlighter-rouge">width</code> (for x-scale) or <code class="highlighter-rouge">height</code> (for y-scale) is not specified.  If <code class="highlighter-rouge">width</code> (for x-scale) or <code class="highlighter-rouge">height</code> (for y-scale) is specified, <code class="highlighter-rouge">bandWidth</code> will always be <code class="highlighter-rouge">"fit"</code>. <br /> 2) If the cardinality of the scale domain is too high, the bandSize might become less than one pixel and the mark might not appear correctly. </span></td>
    </tr>
    <tr>
      <td style="text-align: left">padding</td>
      <td style="text-align: center">Number</td>
      <td style="text-align: left">• For <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> channels, the padding is a multiple of the spacing between points. A reasonable value is 1.0, such that the first and last point will be offset from the minimum and maximum value by half the distance between points. (See D3’s <a href="https://github.com/mbostock/d3/wiki/Ordinal-Scales#ordinal_rangePoints"><code class="highlighter-rouge">ordinalRangePoints()</code></a> for illustration.) <span class="note-line">   • <strong>Default value:</strong> derived from <a href="config.html#scale-config">scale config</a>’s <code class="highlighter-rouge">padding</code></span> <br /> • For <code class="highlighter-rouge">row</code> and <code class="highlighter-rouge">column</code>, padding is a pixel value for padding between cells in the trellis plots. <span class="note-line">   •<strong>Default value:</strong> derived from  <a href="config.html#facet-scale-config">facet scale config</a>’s <code class="highlighter-rouge">padding</code>.</span></td>
    </tr>
  </tbody>
</table>

<h4 id="ex-bandwidth">Example: Custom Band Width</h4>

<p>Given a bar chart:</p>

<div class="vl-example" data-name="bar"></div>

<p>We can make the band for each bar smaller by providing <code class="highlighter-rouge">scale</code>’s <code class="highlighter-rouge">bandSize</code>.</p>

<p><span class="vl-example" data-name="bar_size_bandsize_small"></span></p>

<p>For more information about adjusting size of a visualization, please see <a href="size.html">this page</a>.</p>


  </section>
</div>

  </section>
</div>

<footer>
  <div class="page-centered">
    <span>
      <a href="https://github.com/vega/vega-lite/edit/master/site/docs/scale.md">Edit this page</a> and submit a pull request!
    </span>
    <span class="fill"></span>
    <a href="http://idl.cs.washington.edu" title="UW Interactive Data Lab" class="idl-logo"><img src="/vega-lite/site/static/idl-logo.png"/></a>
  </div>
</footer>

    <script src="/vega-lite/site/static/main.js"></script>
    <script>
      // Google Analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44428446-6', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
